<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.10">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Maglev Training RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Maglev Training Atom Feed"><title data-react-helmet="true">Kubernetes | Maglev Training</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://maglev-training.github.io//docs/architecture/k8s"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Kubernetes | Maglev Training"><meta data-react-helmet="true" name="description" content="This document serves as a general overview of our application orchestration platform, Kubernetes."><meta data-react-helmet="true" property="og:description" content="This document serves as a general overview of our application orchestration platform, Kubernetes."><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://maglev-training.github.io//docs/architecture/k8s"><link data-react-helmet="true" rel="alternate" href="https://maglev-training.github.io//docs/architecture/k8s" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://maglev-training.github.io//docs/architecture/k8s" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.3e55ddb0.css">
<link rel="preload" href="/assets/js/runtime~main.824a60a7.js" as="script">
<link rel="preload" href="/assets/js/main.fc34e7f6.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">Maglev</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Documentation</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/maglev-training/maglev-training.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ðŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ðŸŒž</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Documentation</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" href="/docs/architecture/microservices">Architecture</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/microservices">Microservices</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/architecture/k8s">Kubernetes</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/front-end/using-nx">Frontend</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/back-end/overview">Backend</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/repos">Repositories</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/admin">Administrative Stuff</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/blogging">Blogging</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Kubernetes</h1></header><p>This document serves as a general overview of our application orchestration platform, Kubernetes.</p><p>Since our guiding policies require us to lean into &quot;cloud native&quot; <a href="/#the-stack">As discussed here</a>, this document will start with an overview of Kubernetes architecture aside from any specific distribution or cloud hosting provider. Then it will discuss the specifics of how we are currently using Kubernetes with this application, and then, finally, how contributors can create a local development version of our infrastructure for testing, etc.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="kubernetes-architecture">Kubernetes Architecture<a aria-hidden="true" class="hash-link" href="#kubernetes-architecture" title="Direct link to heading">â€‹</a></h2><p>The most important thing to understand is that Kubernetes is a tool for creating a computer <em>cluster</em>. A cluster is a bunch of computers that you treat as a single computer. Of course, most Kubernetes clusters are made out of a <em>lot</em> of computers (called <strong>nodes</strong>), and <em>somebody</em> has to be responsible for them - security, configuration, all that stuff. But from the point of view of a developer, with a cluster, specifically Kubernetes, you have an API. You send <em>stuff</em> to that API, and you don&#x27;t worry so much about how the whole thing is configured. Unless you want to. And if you do, that is cool and very valuable. We are going to emphasis the <em>abstractions</em> that are provided by Kubernetes for developers.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="the-general-kuberentes-vibe">The General Kuberentes <em>Vibe</em><a aria-hidden="true" class="hash-link" href="#the-general-kuberentes-vibe" title="Direct link to heading">â€‹</a></h3><p>I want to give you a sense of how you, as a developer, might think about Kubernetes.</p><p>When we write software on our local machine, we rely on the operating system to provide some functionality for us. And the less we have to think about how that functionality is provided and implemented, the more we are able to stay focused on the work we are trying to accomplish. If we need to open a file on the hard drive, there are APIs available for that, and we just <em>use</em> them. If we want to open a network connection, we just do it. All that sort of <em>ambient</em> stuff that is available to us as developers that is just a given.</p><p>In distributed applications, which are applications that are spread across multiple physical machines, across networks, etc. it becomes much more complicated. Especially in an orchestrated environment, where the software we are writing might be actually running in multiple <em>replicas</em> simultaneously for scalability and fault-tolerance. Our applications will depend on other applications running in our cluster, and Kubernetes will move those suckers around on us, like a shell game. Those services (and ours!) will be upgraded, downgraded, rescheduled, scaled, etc.</p><p>Now all that stuff will be explored later, but the point is, we sort of need a new operating system that takes all that kind of stuff into account, handles it for us, and lets us focus on what we are supposed to be doing. You know, the whole &#x27;delivering value for the customers&#x27; thing.</p><p>That is a really good metaphor, I think.</p><blockquote><p>Kubernetes is an operating system for distributed applications to run on.</p></blockquote><p>Now, when we are working on our local machines, our operating system has a set of things that it can provide (file system, memory management, networking, etc.), and then we also need <em>other</em> things. We might need a database, and most operating systems don&#x27;t ship with a database that is a good choice for developers to use. So, we might pick one, like <a href="https://mongodb.com" target="_blank" rel="noopener noreferrer">MongoDb</a>, or Sql Server, or whatever, and download it, install it, configure it, etc.</p><p>Kubernetes will take care of that kind of thing for you. You just sort of tell it what you need (this is called the <strong>desired state</strong>), in a pretty clear way, and it will do its darndest to get it all together for you. And unlike most operating systems, it&#x27;ll keep it&#x27;s eye on it after it is created and make sure it&#x27;s all working great, and if it isn&#x27;t, it&#x27;ll fix it.</p><p>An installed Kubernetes cluster is really a set of promises of things that can be provided to software running on that cluster. Some of those things are &quot;batteries included&quot;, they just are there and ready to go. Others have to be provided by the people that install and configure your cluster. For example, one of the things a Kubernetes cluster will provide for your applications is a way for software running <em>outside</em> of the cluster to make a network connection to software running <em>inside</em> the cluster. You &quot;tell&quot; the cluster, through your desired state configuration, that &quot;Hey, this little web server I asked you to run for me? Make it so that people can connect to it from the outside world by going to <a href="https://maglev.training." target="_blank" rel="noopener noreferrer">https://maglev.training.</a> That feature in Kubernetes is called <strong>Ingress</strong>. And there isn&#x27;t one included &quot;in the box&quot;, so to speak. So, if you are going to create a cluster, you have to decide, amongst many options, how you are going to fulfill that promise when a developer asks for it.</p><p>Then there are things that you, as an application developer can ask for, but you might need some &quot;higher level&quot; configuration to provide it. An obvious and common example is just some disk space that you can write to or read from. In your configuration you&#x27;ll just ask for (claim) some disk space, but some cluster administrator is going to have to decide where those bits are actually going to be written. (see &quot;persistent volumes&quot; and &quot;persistent volume claims&quot; below.)</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="key-kubernetes-abstractions">Key Kubernetes Abstractions<a aria-hidden="true" class="hash-link" href="#key-kubernetes-abstractions" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_y2LR" id="cluster">Cluster<a aria-hidden="true" class="hash-link" href="#cluster" title="Direct link to heading">â€‹</a></h4><p>A Kubernetes cluster is at least one machine with the Kubernetes software installed and running on it.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="nodes">Nodes<a aria-hidden="true" class="hash-link" href="#nodes" title="Direct link to heading">â€‹</a></h4><blockquote><p>Nodes are machines that run Kubernetes and workloads assigned to the cluster. A kubernetes cluster is made up of nodes.</p></blockquote><p>A node is a machine (real or &quot;virtual&quot;) that is part of the cluster. Each cluster must have at least one node, but usually has many. Some of the nodes are assigned jobs and duties related to cluster management. We call these &quot;master&quot; nodes. Other nodes are added to just run our applications. These are called &quot;worker&quot; nodes. Running a cluster is a big job, so in production you&#x27;ll rarely have just one node. Nodes can be dynamically added (or removed) from the cluster while it&#x27;s running. It&#x27;s even possible to have nodes on your cluster running &quot;on prem&quot;, and then patch some more into it that are running on some cloud provider somewhere.</p><p>The group of master nodes is called the <strong>control plane</strong>. The control plane is the &quot;brains&quot; of the cluster. It exposes an API that we interact with, it schedules workloads to be run on worker nodes, it keeps track of how things are going (how the <em>desired state</em> we want compares to the <em>actual state</em>), etc.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="namespaces">Namespaces<a aria-hidden="true" class="hash-link" href="#namespaces" title="Direct link to heading">â€‹</a></h4><h4 class="anchor anchorWithStickyNavbar_y2LR" id="pods">Pods<a aria-hidden="true" class="hash-link" href="#pods" title="Direct link to heading">â€‹</a></h4><h4 class="anchor anchorWithStickyNavbar_y2LR" id="storage">Storage<a aria-hidden="true" class="hash-link" href="#storage" title="Direct link to heading">â€‹</a></h4><h4 class="anchor anchorWithStickyNavbar_y2LR" id="networking">Networking<a aria-hidden="true" class="hash-link" href="#networking" title="Direct link to heading">â€‹</a></h4><h2 class="anchor anchorWithStickyNavbar_y2LR" id="our-cloud-hosting-environment-for-kubernetes">Our Cloud Hosting Environment for Kubernetes<a aria-hidden="true" class="hash-link" href="#our-cloud-hosting-environment-for-kubernetes" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="aks">AKS<a aria-hidden="true" class="hash-link" href="#aks" title="Direct link to heading">â€‹</a></h3><h2 class="anchor anchorWithStickyNavbar_y2LR" id="creating-a-local-development-cluster">Creating a Local Development Cluster<a aria-hidden="true" class="hash-link" href="#creating-a-local-development-cluster" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="minikube">Minikube<a aria-hidden="true" class="hash-link" href="#minikube" title="Direct link to heading">â€‹</a></h3><h3 class="anchor anchorWithStickyNavbar_y2LR" id="k3s">K3S<a aria-hidden="true" class="hash-link" href="#k3s" title="Direct link to heading">â€‹</a></h3><h3 class="anchor anchorWithStickyNavbar_y2LR" id="other-options">Other Options<a aria-hidden="true" class="hash-link" href="#other-options" title="Direct link to heading">â€‹</a></h3></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/maglev-training/maglev-training.github.io/blob/main/docs/architecture/k8s.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/architecture/microservices"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->Microservices</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/front-end/using-nx"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Using NX<!-- --> Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#kubernetes-architecture" class="table-of-contents__link toc-highlight">Kubernetes Architecture</a><ul><li><a href="#the-general-kuberentes-vibe" class="table-of-contents__link toc-highlight">The General Kuberentes <em>Vibe</em></a></li><li><a href="#key-kubernetes-abstractions" class="table-of-contents__link toc-highlight">Key Kubernetes Abstractions</a></li></ul></li><li><a href="#our-cloud-hosting-environment-for-kubernetes" class="table-of-contents__link toc-highlight">Our Cloud Hosting Environment for Kubernetes</a><ul><li><a href="#aks" class="table-of-contents__link toc-highlight">AKS</a></li></ul></li><li><a href="#creating-a-local-development-cluster" class="table-of-contents__link toc-highlight">Creating a Local Development Cluster</a><ul><li><a href="#minikube" class="table-of-contents__link toc-highlight">Minikube</a></li><li><a href="#k3s" class="table-of-contents__link toc-highlight">K3S</a></li><li><a href="#other-options" class="table-of-contents__link toc-highlight">Other Options</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Documentation</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/maglev-training" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Hypertheory, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.824a60a7.js"></script>
<script src="/assets/js/main.fc34e7f6.js"></script>
</body>
</html>